<!doctype html>
<html lang="it">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <title>DishFload</title>
  <link rel="stylesheet" href="mystyle.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Jost">
  <script src="http://maps.googleapis.com/maps/api/js"></script>
  <script type="text/javascript" src="markerManager.js"></script>
  <script>
    var myCenter=new google.maps.LatLng(42.492595, 12.845449); // Italy
    var centers = []

    centers.push(new google.maps.LatLng(42.492595, 12.845449) )                     // Italy
    centers.push(new google.maps.LatLng(39.095962936305476, 22.082519531250004) )   // Grecia
    centers.push(new google.maps.LatLng(46.95026224218562, 2.3510742187500004) )    // Francia 
    centers.push(new google.maps.LatLng(52.10650519075632, 5.097656250000001) )     // Olanda 
    centers.push(new google.maps.LatLng(-7.449624260197816, -58.53515625000001) )   // South America 
    centers.push(new google.maps.LatLng(40.44694705960048, -3.6914062500000004) )   // Spain 
    centers.push(new google.maps.LatLng(51.45400691005982, 23.818359375000004) )    // Eastern Europe 
    centers.push(new google.maps.LatLng(16.97274101999902, -97.3828125) )           // Central America
    centers.push(new google.maps.LatLng(7.36246686553575, 20.039062500000004) )     // Africa
    centers.push(new google.maps.LatLng(-24.046463999666567, 134.12109375000003) )  // Australia
    centers.push(new google.maps.LatLng(56.07203547180089, -101.77734375000001) )   // Canada
    centers.push(new google.maps.LatLng(37.99616267972814, -98.08593750000001) )    // USA
    centers.push(new google.maps.LatLng(35.17380831799959, 101.77734375000001) )    // China
    centers.push(new google.maps.LatLng(40.26276066437183, -8.129882812500002) )    // Portugal
    centers.push(new google.maps.LatLng(11.781322229287971, 107.05078870311749) )   // South East Asia
    centers.push(new google.maps.LatLng(16.972738336609233, 99.93164761586442) )    // Thailand
    centers.push(new google.maps.LatLng(53.696706395901856, -1.5600585580823314) )  // British Isles
    centers.push(new google.maps.LatLng(66.6529778873872, 21.70898478589164) )      // Scandinavia
    centers.push(new google.maps.LatLng(24.46715063178086, 78.68408206121084) )     // Indian Subcontinent
    centers.push(new google.maps.LatLng(26.82407092408581, 43.066403938734624) )    // Middle East
    centers.push(new google.maps.LatLng(37.474858193000316, 139.64721678974146) )   // Japan
    centers.push(new google.maps.LatLng(37.5666791, 126.9782914) )                  // Korea
    centers.push(new google.maps.LatLng(18.646245102007867, -69.3896481493052) )    // Caribbean
    centers.push(new google.maps.LatLng(24.527135134940764, -102.83203313325329) )  // Mexico
    centers.push(new google.maps.LatLng(50.61113160353964, 4.702148448913671) )     // Belgian
    centers.push(new google.maps.LatLng(49.55372557959741, 10.239257812500002) )    // DACH ( Germania , Austria e Svizzera)


    // array degli infoWindows
    infoWindow_array = [
                          "Cucina italiana",
                          "Cucina greca",
                          "Cucina francese" ,
                          "Cucina olandese" ,
                          "Cucina sud americana", 
                          "Cucina spagnola", 
                          "Cucina del est Europa" , 
                          "Cucina dell'America centrale" , 
                          "Cucina africana", 
                          "Cucina austaliana", 
                          "Cucina canadese" , 
                          "Cucina americana", 
                          "Cucina cinese" , 
                          "Cucina portoghese" ,
                          "Cucina del sud-est asiatico",
                          "Cucina thailandese",
                          "Cucina delle isole britanniche",
                          "Cucina scandinava",
                          "Cucina dell'India subcontinentale",
                          "Cucina del medio oriente",
                          "Cucina giapponese",
                          "Cucina coreana",
                          "Cucina caraibica",
                          "Cucina messicana",
                          "Cucina belga",
                          "Cucina tedesca" 
                      ]
                      
  
  country_array = [
                      'Italy',
                      'Greece' ,
                      'France' ,
                      'Misc.: Dutch' ,
                      'South America' ,
                      'Spain' ,
                      'Eastern Europe' ,
                      'Misc.: Central America' ,
                      'Africa' ,
                      'Australia & NZ' ,
                      'Canada' ,
                      'USA' ,
                      'China' ,
                      'Misc.: Portugal' ,
                      'South East Asia' ,
                      'Thailand' ,
                      'British Isles' ,
                      'Scandinavia' ,
                      'Indian Subcontinent' ,
                      'Middle East' ,
                      'Japan' ,
                      'Korea' ,
                      'Caribbean',
                      'Mexico' ,
                      'Misc.: Belgian',
                      'DACH Countries'                      
                  ]



    function initialize()
    {
      var mapProp = {
                      center:myCenter,
                      zoom:5,
                      mapTypeId:google.maps.MapTypeId.ROADMAP
                    };

      var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

      var marker=new google.maps.Marker({ position:myCenter, });
      marker.setMap(map);

      var i = 0;
      for( i = 0; i < centers.length; i+= 1)
      {
        marker = new google.maps.Marker({position: centers[i]});
        marker.setMap(map)
       

        var infowindow = new google.maps.InfoWindow({ content:infoWindow_array[i]});

        // marker.addListener('mouseover', function() { infowindow.open(map, this); } );
        // // assuming you also want to hide the infowindow when user mouses-out
        // marker.addListener('mouseout', function() { infowindow.close(); } );

       
        // google.maps.event.addListener(marker, 'click', function() { infowindow.open(map,marker); }); 

        

        //qui ci va la query di ricerca piatti per nazionalit√† 
        function f(str)
        {
          return function()
          {
            console.log("ho fatto click su ", str)
          }
          
        }

        //google.maps.event.addListener(marker,'click', ( function(marker,content,infowindow) { return function() { infowindow.setContent(content); infowindow.open(map,marker); }; } )(marker,infoWindow_array[i],infowindow) );
        
        // funzine che ci server per avviare la query di ricerca di ricette per 
        google.maps.event.addListener(marker,'click', f(country_array[i]) );

        google.maps.event.addListener(marker,'mouseover', (function(marker,content,infowindow){ 
          return function() {
            infowindow.setContent(content);
            infowindow.open(map,marker);
          };
        })(marker,infoWindow_array[i],infowindow));

        google.maps.event.addListener(marker,'mouseout', (function(marker,content,infowindow){ 
          return function() {
            //infowindow.setContent(content);
            infowindow.close();
          };
        })(marker,infoWindow_array[i],infowindow));


      }


    }

    google.maps.event.addDomListener(window, 'load', initialize);

  </script>

</head>


<body>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    <!-- As a heading -->
    <nav class="navbar navbar-light bg-light">
      <div  class="container-fluid">
        <span style="font-size: 35px; color: #F9FCFB;" class="navbar-brand mb-0 h1">üçΩÔ∏è<b>Dish</b>fload</span>
      </div>
    </nav>

    <div class="container">
      <div id = "MyHeader">
       <img src="dishIcon.png" style="width: 60px; height: 60px;" alt="Dish">
       <p style="text-align: center;"><b>Scegli un luogo, scopri nuovi piatti, assapora.<b></p>
      </div>
      <div id="googleMap"></div>
    </div>

  <!-- Se clicchi un luogo sulla mappa: -->
  <%- include('NationRecipeView');-%>

  <%- include('CategoryqueryView');-%>

  <%- include('ingredientQueryView');-%>

  <!-- Footer -->
  <div id="footer" class="text-center p-4" style="background-color: #FD5E53; justify-content: center; align-items: center;">
    <p style="font-size: x-large; color: white;"> <b>üõ†Ô∏è developers üõ†Ô∏è</b></p>
    <p style="font-size: large; color: white; font-weight: normal;" >
      <img src="instagram.png" style="width: 30px; height: 30px;" alt="instagram">
      <i> @_fernet_  /  @fab.priore  /  @black_sickle </i>
      <img src="instagram.png" style="width: 30px; height: 30px;" alt="instagram">
    </p>

  </div>


    <!-- <% listaRicette.forEach(function(item,index){ %>
        <li><i>"<%= item.Title %>"</i> , <%= item.Cuisine %> </li>
    <% }) %> -->





</body>


</html>
